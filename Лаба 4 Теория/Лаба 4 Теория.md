**Способы повышения производительности запросов:**
- Использование индексов
- Настройка физических параметров СУБД
(СУБД: Выбор наименьшего по стоимости плана выполнения запроса)

**Индекс** - список всех значений в группе из одного или нескольких столбцов, упорядоченный в каком-то смысле.
То есть значение этого списка будет ссылаться на значение в реальной таблице.

**! Индексы работают неявно !**
	То есть в каком то запросе могут использоваться, в каком-то нет.

**Индексы ускоряют**: 
- работу с большими таблицами
- работу WHERE и JOIN
- Агрегатные функции MIN и MAX
- Сортировку и группировку столбцов таблицы

**Недостатки**:
- Индекс занимает место в памяти
- При удалении изменении содержимого в реальной таблице также надо будет менять и индексацию, то есть замедляет операции
- При работе с маленькими таблицами будет неэффективен
- Также неэффективен если по условию выборки ожидается выбор большого кол-ва данных

**Bдерево**:
	Связанный ациклический граф
**Btree Index** - индес сгрупированный по листьям Btree
**Свойства BTree**:
- значения внутри каждой ноды отсортированы
- ключ равномерно распределены по узлам
- полезно при использовании с операторами сравнения

**HashIndex**: узнать

**Структура выполнения запроса**:
1. Парсер
2. Рерайтер (преобразователь)
3. Оптимизатор (планнер)
4. Экзекутор (исполнитель)

**План выполнения запроса**: 
	Соответствующий SQL запросу алгоритм выполнения запроса.

Таких планов может быть много, СУБД должна выбирать наиболее эффективный из построенных планов

**Критерии оценивания плана**:
- Число обменов с внешней памятью
- Среднее время обмена

**Реляционная алгебра и построение планов выполнения**:
![[Pasted image 20240521130321.png]]
- - -
![[Pasted image 20240521130336.png]]
	В результате данной операции формируются результат, который содержит только те строки, которые удовлетворяют предикату **φ**. R - таблица откуда будет произведена выборка.

**Пример**: 
![[Pasted image 20240521130524.png]]
- - - 
![[Pasted image 20240521130540.png]]
	Операция в результате которой будут выбраны только те атрибуты из R, который указаны в **attr**.
**Пример**:
![[Pasted image 20240521130632.png]]
- - -
![[Pasted image 20240521130659.png]]
	Операция в результате которой будет получено соединение таблиц R с таблицей S по условию **θ**.
- - -
**Пример выполнения одного и того же запроса разными планами**:
![[Pasted image 20240521131208.png]]
- - -
**Законы реляционной алгебры**:
![[Pasted image 20240521131245.png]]
- - -
**Материализация данных**:
	Сохранение результатов промежуточных операций.
	Увеличивает время выполнения запроса т.к. добавляет две доп операции в план - запись промежуточных данных и затем их чтение.
**Конвейерная обработка данных**:
	передача результатов одной обработки другой без создания промежуточных/буферных/временных отношений (таблиц).

**Левостороннее дерево**:
	Дерево в котором внешнее отношение всегда находиться слева.
	- Сокращает число планов для анализа
	- Использует конв. обработку данных

Типы деревьев
	1. Левостороннее (Внешнее отношение всегда на левой ветке)
	2. Смешанное линейное (Внешнее отношение на левой ветке XOR на правой ветке)
	3. Нелинейное (Внешнее отношение на левой или на правой ветке)
Советы:
	1. Использовать конв. обработку (левосторонние планы)
	2. Делать выборку как можно раньше
	3. Делать проекции раньше
	4. Грамотно планировать соединения